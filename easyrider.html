<!DOCTYPE html>

<!-- easyrider.html
     created 20111202
  -->

<html>
 <head>
  <title>Easy Rider</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; marginl: 0; padding: 0 }
    #map_canvas { height: 100% }
  </style>

  <script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCC5EVLne7LJHdAVBnLY6Ve6gPku049fG8&sensor=false">
  </script>

  <script type="text/javascript">
    //Global Script Variables
    var markers = [];

    var map = null;

    function initialize()
    {
      var latlng = new google.maps.LatLng(42.25, -71.85);

      var myOptions = {
        zoom: 12,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };

      map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);

      //Add a listener to respond to clicks on the map.
      google.maps.event.addListener(
          map
        , 'click'
        , function(event)
          {
            addMarker(event.latLng, true);
          }
        ) ;

      //Add a listener to remove a marker with a double-click

    }

    //Add a marker to the map. This has a limit as not to overflow the
    //courtesy request limit offered by Google.
    function addMarker(latlng, doQuery)
    {
      if (markers.length < 10)
      {
        var marker = new google.maps.Marker({
            position: latlng
          , map: map
          , draggable: true
          } );

        google.maps.event.addListener(
            marker
          , 'dragend'
          , function(e) {
              updateElevation();
            }
          ) ;

        markers.push(marker);

        if (doQuery) {
          updateElevation();
        }

        if (markers.length == 10) {
          document.getElementById('address').disabled = true;
        }
      } else {
        alert("No more than 10 points can be added");
      }
    }

    //Call addAddress() if the Return key is pressed in the address field.
    function addressKeyHandler(evt) {
      var keycode;

      if (window.event) {
        keycode = window.event.keyCode;
      } else if (evt) {
        keycode = evt.which;
      } else {
        return true;
      }

      if (keycode == 13) {
        addAddress();
        return false;
      } else {
        return true;
      }
    }


  </script>
 </head>

 <body onload="initialize()">
  <div id="map_canvas"
       style="border: 1px solid black; width:512px; height:400px"></div>

  <p>Address: <input type="text"
                     id="address"
                     size="15"
                     onkeypress="return addressKeyHandler(event)"/>
  </p>

 </body>
</html>
